CH01. 클라우드 컴퓨팅
=====================

### 클라우드 컴퓨팅이란?
```markdown
인터넷 기술을 이용해서 다수의 사용자에게 하나의 서비스로서 방대한 IT 능력을 제공하는 컴퓨팅 방식
```
<br><br>  

### 클라우드 컴퓨팅의 특징
__1. 주문형 셀프서비스__ : 고객이 원하는 시점에 바로 서비스 사용 가능  
__2. 광대역 네트워크 접근__ : 각 클라우드 서비스 업체가 제공하는 광대역 네트워크를 이용하여 다양한 클라이언트 플랫폼이 빠르게 접속 가능    
__3. 신속한 탄력성과 확장성__ : 자동 조정 기능을 통해 몇 분 안에 신속한 확장과 축소를 조정 가능    
__4. 자원의 공동관리__ : 물리적 가상화된 자원을 풀로 관리하며, 탄력적으로 사용자 요두에 따라 동적으로 할당 또는 재할당 됨  
__5. 측정 가능한 서비스__ : 자원 사용량이 실시간으로 수집되는 요금산정 기능을 통해 비용이 발생한다.   
<br><br>  

### 클라우드 컴퓨팅 구조  
클라우드 컴퓨팅 구조는 최하위 계층으로 자원 활용과 관련된 `물리적 시스템 계층`, `가상화 계층`, `프로비저닝 계층`이 있고, 클라우드 서비스와 관련된 `클라우드 서비스 관리 계층`, `클라우드 서비스 계층`으로 구분한다. 
그 위로는 사용자와 관련된 `클라우드 접근 계층`으로 사용자 역할에 따른 연결성 구분을 설정할 수 있다.  
<br><br>  

### 클라우드 컴퓨팅 제공 방식과 클라우드 서비스 종류  
#### 클라우드 컴퓨팅 제공 방식
__1. 온프레미스__   
기업이 자체 데이터 및 설루션 등을 저장하기 위해 자사에 데이터 센터를 구축하여 IT 서비스를 수행하였는데, 이를 온프레미스라고 한다.  
하지만 이 방식은 하드웨어로부터 모든 자원에 대한 초기 투자 비용과 탄력적이지 않은 제한된 용량으로 인해 지속적 관리 비용이 증가하는 단점이 있다.  
클라우드 도입은 비용 측면보다는 서비스의 가용성과 품질을 높여서 기업의 이익을 높일 수 있다.  
<br>  
__2. 퍼블릭 클라우드__  
퍼블릭 클라우드 방식은 인터넷을 통해 다수의 사용자에게 서버 및 스토리지 등 클라우드 자원을 클라우드 서비스 공급자로부터 제공받는 방식이다.  
사용자 및 그룹 단위로 권한 관리를 통해 서비스 격리를 하기 때문에 사용자 간의 간섭이 발생하지 않는다.  
<br>  
__3. 프라이빗 클라우드__  
프라이빗 클라우드 방식은 제한된 네트워크에서 특정 사용자나 기업만을 대상으로 하는 클라우드 서비스 방식으로, 클라우드 자원과 데이터는 기업 내부에 저장되고 유지관리에 대한 책임 또한 기업이 갖는다. 
인터넷이 아닌 인트라넷 방식(내부 개인인증 및 VPN 등)으로 서비스에 접근하게 되므로 보안성이 높다.  
<br>  
__4. 하이브리드 클라우드__  
하이브리드 클라우드 방식은 퍼블릭 클라우드와 프라이빗 클라우드를 네트워크를 통해 서로 결합하여 두 가지 서비스의 장점을 활용할 수 있도록 만든 클라우드 서비스 방식이다. 
서로 다른 클라우드 간에 데이터와 애플리케이션 공유 및 이동이 유연하게 처리될 수 있고, 용도에 맞는 서비스 구현에 유리하다.  
<br>  

#### 클라우드 서비스의 종류  
클라우드 서비스란 어디서나 별도의 소프트웨어 등을 설치하지 않고 인터넷 접속을 통해 저장해 놓은 데이터에 접근하여 사용할 수 있는 서비스를 말한다.  
<br>
__1. 서비스로서의 인프라스트럭처(Infrastructure as a Service, IaaS)__  
서버, 스토리지, 네트워크와 같은 인프라 하드웨어 자원을 가상화하여 사용자 요구에 따라 인프라 자원을 사용할 수 있게 제공하는 클라우드 서비스 방식이다.  
<br>  
__2. 서비스로서의 플랫폼(Platform as a Service, PaaS)__  
서비스 개발자가 애플리케이션 개발, 실행 관리 등을 할 수 있도록 안정적인 플랫폼 또는 프레임워크를 제공하는 클라우드 서비스 방식이다.  
<br>  
__3. 서비스로서의 소프트웨어(Software as a Service, SaaS)__  
소프트웨어 사용자가 자신의 컴퓨터에 소프트웨어를 설치하지 않고 인터넷을 통해 클라우드에 접속하여 클라우드 기반 소프트웨어의 기능을 사용할 수 있게 해주는 클라우드 서비스 방식이다.  
<br><br>
  
### 가상머신과 컨테이너  
클라우드 컴퓨팅에서 가상화는 하드웨어 기능을 시뮬레이션하여 애플리케이션 서버, 스토리지, 네트워크와 같은 유용한 IT 서비스를 생성하는 소프트웨어 아키텍처 기술이다. 
모든 규모의 비즈니스에서 IT 비용을 절감하면서 효율성과 대응력, 가용성 향상과 운영 자동화를 통해 IT 관리를 간소화하고, 소유 및 운영 비용을 낮출 수 있다.  

최근 사용하고 있는 가상화는 `하이퍼바이저를 이용한 가상머신`과 `컨테이너를 이용한 도커 방식`이다.  
가상머신은 호스트 운영체제 위에 가상화 소프트웨어를 이용하여 여러 개의 게스트OS를 구동하는 방식이다. 
하이퍼바이저는 가상머신을 생성하고 실행하는 역할과 가상화된 하드웨어와 각각의 가상머신을 모니터링하는 중간 관리자다. 
각각의 게스트OS는 호스트 운영체제로부터 독립된 자원을 할당받아 가상화된 서비스를 제공하기 때문에 수 기가바이트의 용량을 차지하는 이미지를 만들어 사용한다.  

컨테이너를 이용한 가상화는 리눅스 기반의 물리적 공간 격리가 아닌 프로세스 격리를 통해 경량의 이미지를 실행하고 서비스할 수 있는 컨테이너 기술이다. 
클라우드 서비스의 컨테이너는 애플리케이션을 구동하는 환경을 격리한 공간을 의미한다.  

도커 엔진이 차용하고 있는 컨테이너 기술은 본래 리눅스 자체 기술인 `chroot`, `namespace`, `cgroup`을 조합한 리눅스 컨테이너에서 출발한다.  
- __chroot__: 특정 디렉터리를 최상위 디렉터리 root로 인식하게끔 설정하는 리눅스 명령
- __namespace__: 프로세스 자원을 관리하는 기능으로 mnt, pid, net, ipc, user 등의 자원을 그룹화하여 할당하는 기능
- __cgroup__: CPU, 메모리, 디스크I/O, 네트워크 등의 자원 사용량 제어를 통해 특정 애플리케이션의 과도한 자원 사용을 제한하는 기능
<br><br>   

물리적 요소에 대한 가상화인 `가상머신`과 다르게 __`컨테이너` 가상화는 프로세스 가상화다.__ 
컨테이너 엔진인 도커와 오케스트레이션 도구인 쿠버네티스는 호스트 운영체제의 커널을 공유하고 그 위에 실행 파일 및 라이브러리 기타 구성 파일 등을 이미지로 빌드하여 패키지로 배포하는 방식이다.  

컨테이너 기술의 장점은 다음과 같다.  
- 하이퍼바이저와 게스트 OS가 없기 때문에 가볍다.  
- 경량이기 때문에 만들어진 이미지 복제, 이관 배포가 쉽다.  
- 게스트 OS를 부팅하지 않기 때문에 애플리케이션 시작 시간이 빠르다.  
- 가상머신보다 경량이므로 더 많은 애플리케이션을 실행할 수 있다.  
<br><br>  

### 도커   
__컨테이너는 코드와 모든 종속성을 패키지화하는 표준 소프트웨어 단위__ 로, 애플리케이션이 한 컴퓨팅 환경에서 다른 컴퓨팅 환경으로 빠르고 안정적으로 실행되도록 한다. 
__도커 컨테이너 이미지는 애플리케이션을 실행하는 데 필요한 모든 것을 포함하는 경량의 독립형 실행 가능 소프트웨어 패키지라고 정의할 수 있다.__  
도커 컨테이너 이미지는 도커 허브로부터 내려받거나 Dockerfile을 통해 생성하여 도커 엔진을 이용해 실행하면 컨테이너 서비스가 된다.  
도커의 주요 기능은 다음과 같다.  
- __LXC를 이용한 컨테이너 구동__: containerd는 리눅스 및 윈도우용 데몬으로, 이미지 전송 및 스토리지에서 컨테이너 실행 및 감독, 네트워크 연결까지 호스트 시스템 전체 컨테이너의 라이프 사이클을 관리한다.  
- __통합 Buildkit__: 빌드킷은 도커 파일의 설정 정보를 이용하여 도커 이미지를 빌드하는 오픈소스 도구이며, 빠르고 정확하게 여러 가지 아키텍처 향상 기능을 제공한다.
- __도커 CLI 기반__: 도커 명령을 수행하는 기본적인 방법은 CLI로 제공한다.  

도커를 사용하기 위해서는 두 가지 구성 요소를 다룰 수 있어야 한다.  
- __도커 엔진__: 컨테이너, 이미지를 다루기 위해 필요
- __도커 허브__: 이미지 업로드/다운로드를 통해 컨테이너 서비스에 필요한 이미지 배포를 지원

도커 컨테이너 기술은 PaaS 서비스를 가능하게 하는 소프트웨어 개발환경을 제공하는 것이다. 
다만, 컨테이너 서비스에 대한 자동화된 관리, 트래픽 라우팅, 로드 밸런싱 등을 쉽게 하려면 오케스트레이션 기능이 추가로 요구된다.  

도커에는 위에서 언급한 기본적인 도커 엔진, 도커 허브 외에 활용도가 높은 많은 구성 요소가 있다.  
- Docker Engine: 도커를 이용한 애플리케이션 실행 환경 제공을 위한 핵심 요소
- Docker Hub: 전 세계 도커 사용자들과 함께 도커 컨테이너 이미지를 공유하는 클라우드 서비스
- Docker-compose: 의존성 있는 독립된 컨테이너에 대한 구성 정보를 YAML 코드로 작성하여 일원화된 애플리케이션 관리를 가능하게 하는 도구
- Docker Kitematic: 컨테이너를 이용한 작업을 수행할 수 있는 GUI 제공
- Docker Registry: 도커 허브 사이트는 공개된 레지스트리. 사내에 도커 컨테이너 이미지를 push/pull 할 수 있는 독립된 레지스트리 구축 시 사용
- Docker Machine: 가상머신 프로그램 및 AWS EC2, MS Azure 환경에 도커 실행 환경을 생성하기 위한 도구  
- Docker Swarm: 여러 도커 호스트를 클러스터로 구축하여 관리할 수 있는 도커 오케스트레이션 도구  






